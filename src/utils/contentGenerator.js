// Шаблоны для начала абзацев
const paragraphStarters = [
  "По сообщениям из достоверных источников, ",
  "Как стало известно нашему изданию, ",
  "Согласно последней информации, ",
  "Эксперты отмечают, что ",
  "Наши корреспонденты сообщают, что ",
  "По мнению аналитиков, ",
  "Недавние исследования показывают, что ",
  "Очевидцы утверждают, что ",
  "Официальные представители заявляют, что ",
  "Инсайдеры сообщают, что ",
  "Согласно неподтвержденным данным, ",
  "Как сообщают информированные источники, ",
  "По предварительной информации, ",
  "Из надежных источников стало известно, что ",
  "Наблюдатели отмечают, что "
];

// Шаблоны для середины абзацев
const paragraphMiddles = {
  politics: [
    "это решение вызвало неоднозначную реакцию в политических кругах. ",
    "данный шаг может привести к серьезным последствиям для международных отношений. ",
    "эксперты расходятся во мнениях относительно возможных последствий. ",
    "оппозиция уже выступила с критикой данного решения. ",
    "общественность разделилась в оценке этого события. ",
    "данная инициатива направлена на укрепление позиций страны на международной арене. ",
    "это может стать поворотным моментом в политической истории. ",
    "аналитики предсказывают серьезные изменения в политическом ландшафте. ",
    "это решение было принято после длительных консультаций с экспертами. ",
    "данный шаг является частью долгосрочной стратегии. "
  ],
  technology: [
    "данная технология может революционизировать отрасль. ",
    "эксперты отмечают высокий потенциал этой разработки. ",
    "это открытие может изменить наше представление о технологических возможностях. ",
    "инвесторы проявляют большой интерес к этой инновации. ",
    "данная разработка решает ряд существующих проблем в отрасли. ",
    "это технологическое решение уже привлекло внимание крупных компаний. ",
    "специалисты отмечают уникальность данного подхода. ",
    "эта технология может найти применение в различных сферах. ",
    "разработчики утверждают, что продукт готов к массовому производству. ",
    "данная инновация может значительно упростить повседневную жизнь. "
  ],
  sports: [
    "это событие стало неожиданностью для многих болельщиков. ",
    "спортивные комментаторы назвали это историческим моментом. ",
    "тренеры отмечают высокий уровень подготовки спортсменов. ",
    "это достижение стало результатом многолетних тренировок. ",
    "фанаты с нетерпением ждут следующих соревнований. ",
    "эксперты предсказывают дальнейший рост результатов. ",
    "это событие может изменить расстановку сил в турнирной таблице. ",
    "спортивные аналитики обсуждают возможные последствия для карьеры спортсмена. ",
    "это выступление войдет в историю спорта. ",
    "данный результат превзошел все ожидания. "
  ],
  entertainment: [
    "поклонники с восторгом встретили эту новость. ",
    "критики высоко оценили данную работу. ",
    "это событие стало одним из самых обсуждаемых в социальных сетях. ",
    "фанаты выражают смешанные чувства по поводу этого решения. ",
    "данный проект может стать одним из самых успешных в этом году. ",
    "эксперты индустрии развлечений отмечают оригинальность подхода. ",
    "это сотрудничество может привести к созданию уникального контента. ",
    "данное событие привлекло внимание миллионов людей по всему миру. ",
    "это может стать новым трендом в индустрии развлечений. ",
    "критики уже называют это явление культурным феноменом. "
  ]
};

// Шаблоны для конца абзацев
const paragraphEndings = [
  "Остается только ждать дальнейшего развития событий.",
  "Мы будем следить за развитием ситуации.",
  "Время покажет, насколько оправданы эти ожидания.",
  "Дальнейшие подробности станут известны позднее.",
  "Эксперты продолжают анализировать возможные последствия.",
  "Общественность с интересом наблюдает за происходящим.",
  "Это лишь начало большой истории.",
  "Мы обязательно сообщим о новых подробностях.",
  "Ситуация продолжает развиваться.",
  "Окончательные выводы делать пока рано."
];

// Шаблоны цитат
const quotes = {
  politics: [
    "«Это решение было принято в интересах нашей страны и ее граждан», — заявил официальный представитель.",
    "«Мы не можем игнорировать сложившуюся ситуацию и должны действовать решительно», — подчеркнул политик.",
    "«Данная инициатива направлена на укрепление нашей безопасности», — отметил эксперт.",
    "«Это историческое решение, которое определит будущее на десятилетия вперед», — заявил лидер партии.",
    "«Мы открыты к диалогу и готовы обсуждать все спорные вопросы», — сказал дипломат."
  ],
  technology: [
    "«Эта технология изменит мир так же, как когда-то это сделал интернет», — утверждает разработчик.",
    "«Мы стоим на пороге новой технологической революции», — заявил глава компании.",
    "«Наша разработка решает проблемы, которые раньше казались неразрешимыми», — подчеркнул инженер.",
    "«Это только начало, впереди еще много удивительных открытий», — отметил ученый.",
    "«Безопасность пользователей остается нашим главным приоритетом», — заверил представитель компании."
  ],
  sports: [
    "«Эта победа — результат многолетней работы всей команды», — заявил спортсмен.",
    "«Мы готовились к этому моменту всю жизнь», — признался чемпион.",
    "«Соперник был очень силен, но мы смогли найти его слабые места», — рассказал тренер.",
    "«Это только начало, мы нацелены на новые рекорды», — подчеркнул атлет.",
    "«Поддержка болельщиков придала нам сил в самые трудные моменты», — отметил капитан команды."
  ],
  entertainment: [
    "«Этот проект стал для меня настоящим вызовом», — признался артист.",
    "«Мы хотели создать что-то действительно особенное», — рассказал режиссер.",
    "«Реакция публики превзошла все наши ожидания», — отметил продюсер.",
    "«Это только начало большого творческого пути», — заявил музыкант.",
    "«Мы вложили в эту работу всю душу», — подчеркнул автор."
  ]
};

// Функция для генерации абзаца
const generateParagraph = (title, category) => {
  const starter = paragraphStarters[Math.floor(Math.random() * paragraphStarters.length)];
  
  // Выбираем середину абзаца в зависимости от категории
  const middles = paragraphMiddles[category] || paragraphMiddles.politics;
  const middle = middles[Math.floor(Math.random() * middles.length)];
  
  const ending = paragraphEndings[Math.floor(Math.random() * paragraphEndings.length)];
  
  return starter + middle + ending;
};

// Функция для генерации цитаты
const generateQuote = (category) => {
  const categoryQuotes = quotes[category] || quotes.politics;
  return categoryQuotes[Math.floor(Math.random() * categoryQuotes.length)];
};

// Основная функция для генерации текста новости
export const generateNewsContent = (title, category) => {
  // Проверяем наличие заголовка
  if (!title) {
    title = "Новость дня";
  }
  
  // Проверяем наличие категории
  const validCategories = ['politics', 'technology', 'sports', 'entertainment'];
  const selectedCategory = category && validCategories.includes(category) 
    ? category 
    : validCategories[Math.floor(Math.random() * validCategories.length)];
  
  // Определяем количество абзацев (от 2 до 4)
  const paragraphCount = Math.floor(Math.random() * 3) + 2;
  
  // Генерируем первый абзац, который включает заголовок
  let content = title + ". " + generateParagraph(title, selectedCategory);
  
  // Генерируем цитату
  const quote = generateQuote(selectedCategory);
  
  // Генерируем остальные абзацы
  for (let i = 1; i < paragraphCount; i++) {
    // Добавляем цитату в середине текста
    if (i === Math.floor(paragraphCount / 2)) {
      content += "\n\n" + quote;
    }
    
    content += "\n\n" + generateParagraph(title, selectedCategory);
  }
  
  // Ограничиваем длину текста до 500 символов
  if (content.length > 500) {
    // Находим последнее предложение, которое полностью помещается в лимит
    const lastDotIndex = content.substring(0, 497).lastIndexOf('.');
    if (lastDotIndex > 0) {
      content = content.substring(0, lastDotIndex + 1);
    } else {
      content = content.substring(0, 497) + '...';
    }
  }
  
  return content;
}; 